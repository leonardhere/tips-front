<article class="contact-card clearfix">
    <div class="contact-col-left contact-card__map-mini" id="ya_map_min_1">
    </div>
    <div class="contact-col-right">
        <h2 class="contact-card__header">
            Центральный офис:1312312zad
        </h2>
        <div class="contact-card-item">
            <i class="isoi isoi-phone_contacts"></i>
            <span class="contact-card__title">Телефон</span>
            <span class="phone-to-call" id="comagic_phone_5">+7(495) 274-01-50</span>
        </div>
        <div class="contact-card-item">
            <i class="isoi isoi-contacts"></i>
            <span class="contact-card__title">Адрес</span>
            <span class="contact-card__address">Москва, ул. Молодогвардейская, д.61</span>
            <span class="visible-modal">
                <p>Вход в офис компании находится на территории ДОК №5. Проход к нему осуществляется через проходную ДОК №5.</p>
            </span>
            <a class="contact-card__detailed hidden-modal" data-coords="55.73347065613636,37.39088860978698">Как добраться</a>
        </div>
        <div class="contact-card-item">
            <i class="isoi isoi-watch-2"></i>
            <span class="contact-card__title">График работы</span>
            <span><p>Ежедневно: 8:00 - 20:00</p></span>
        </div>
        <div class="visible-modal">
            <h2>
                Как добраться
            </h2>
            <p>
                <b>Проезд на городском транспорте <br />
                    от станции метро "Молодежная":
                </b>
            </p>
            <ul class="text-justify list-style-circle">
                <li>Первый вагон из центра выход в город в сторону Рублевского шоссе, направо за станцией метро находится остановка. Вам нужен автобус или маршрутка № 660, 660М.</li>
                <li>Необходимо доехать до остановки "Молодогвардейская" (рядом АЗС "Лукойл"). На воротах территории висит адресный указатель: ул. Молодогвардейская 61.</li>
                <li>Вам необходимо пройти в серую дверь на проходной, предъявить паспорт, либо иной документ, удостоверяющий личность и Вам выпишут пропуск.</li>
                <li>Следуйте примерно 10 метров вперед и Вы увидите указатель компании АО "ИЗОЛЮКС", Вам нужно повернуть направо и далее двигаться к двухэтажному зданию, в котором расположена наша компания.</li>
            </ul>
        </div>
    </div>
</article>

<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>

<script>
    $(function() {
        //Build mini maps
        $('.contact-card').each(function() {
            var $this = $(this);
            //Office name
            var officeName = $this.find('.contact-card__header').html();
            //address
            var address = $this.find('.contact-card__address').html();
            //map
            var myMap,
                mapCenter = $this.find('.contact-card__detailed').attr('data-coords').split(','),
                mapContainerID = $this.find('.contact-card__map-mini').attr('id').replace('#', '');
            ymaps.ready(function() {
                myMap = new ymaps.Map(mapContainerID, {
                        center: mapCenter,
                        zoom: 15,
                        controls: []
                    }),
                    myPlacemark = new ymaps.Placemark(myMap.getCenter(), {
                        hintContent: officeName,
                        balloonContent: address
                    }, {
                        iconLayout: 'default#image',
                        iconImageHref: 'skin/frontend/adaptive/default/images/mapicon.png',
                        iconImageSize: [57, 52],
                        iconImageOffset: [-20, -50]
                    });

                myMap.geoObjects.add(myPlacemark);
            });
        });

        $('.contact-card__detailed').on('click', function(e) {
            e.preventDefault();
            var modal = $('#modal-map-detailed');
            var $this = $(this).closest('.contact-card');
            var officeName = $this.find('.contact-card__header').html();
            var address = $this.find('.contact-card__address').html();
            var myMap,
                mapCenter = $this.find('.contact-card__detailed').attr('data-coords').split(',');
            var leftColContent = $this.find('.contact-col-right').html();

            modal.find('#contact-modal-content').html(leftColContent);

            ymaps.ready(function() {
                myMap = new ymaps.Map('contact-modal-map', {
                        center: mapCenter,
                        zoom: 15,
                        controls: ['zoomControl']
                    }),
                    myPlacemark = new ymaps.Placemark(myMap.getCenter(), {
                        hintContent: officeName,
                        balloonContent: address
                    }, {
                        iconLayout: 'default#image',
                        iconImageHref: 'skin/frontend/adaptive/default/images/mapicon.png',
                        iconImageSize: [57, 52],
                        iconImageOffset: [-20, -50]
                    });

                myMap.geoObjects.add(myPlacemark);
            });

            modal.modal('show');
            modal.on('hidden.bs.modal', function() {
                myMap.destroy();
            });
        });

    });
</script>

<div id="modal-map-detailed" class="modal fade" role="dialog">
    <div class="modal-dialog modal-xl">
        <div class="modal-content modal-bg-white">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="isoi isoi-close" aria-hidden="true"></i></button>
            </div>
            <div class="modal-body">
                <div class="clearfix">
                    <div class="col-lg-7 contact-modal-map" id="contact-modal-map"></div>
                    <div class="col-lg-5 contact-modal-content" id="contact-modal-content"></div>
                </div>
            </div>
        </div>
    </div>
</div>
