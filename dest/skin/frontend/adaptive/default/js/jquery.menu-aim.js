(function(c,d,f,g){function h(k,l){this.el=k,this.options=c.extend({},j,l),this._defaults=j,this._name=i,this.init()}var i="menuAim",j={triggerEvent:"hover",rowSelector:"> li",handle:"> a",submenuSelector:"*",submenuDirection:"right",openClassName:"open",tolerance:75,activationDelay:300,mouseLocsTracked:3,defaultDelay:300,enterCallback:c.noop,activateCallback:c.noop,deactivateCallback:c.noop,exitCallback:c.noop,exitMenuCallback:c.noop};h.prototype={init:function(){this.activeRow=null,this.mouseLocs=[],this.lastDelayLoc=null,this.timeoutId=null,this.openDelayId=null,this.isOnClick=-1<c.inArray(this.options.triggerEvent,["both","click"]),this.isOnHover=-1<c.inArray(this.options.triggerEvent,["both","hover"]),this.isOnHover&&this._hoverTriggerOn(),this.isOnClick&&this._clickTriggerOn()},_mouseMoveDocument:function(k){obj=k.data.obj,obj.mouseLocs.push({x:k.pageX,y:k.pageY}),obj.mouseLocs.length>obj.options.mouseLocsTracked&&obj.mouseLocs.shift()},_mouseLeaveMenu:function(k){obj=k.data.obj,obj.timeoutId&&clearTimeout(obj.timeoutId),obj.openDelayId&&clearTimeout(obj.openDelayId),obj._possiblyDeactivate(obj.activeRow),obj.options.exitMenuCallback(this)},_mouseEnterRow:function(k){obj=k.data.obj,obj.timeoutId&&clearTimeout(obj.timeoutId),obj.options.enterCallback(this),obj._possiblyActivate(this)},_mouseLeaveRow:function(k){k.data.obj.options.exitCallback(this)},_clickRow:function(k){obj=k.data.obj,obj._activate(this),c(obj.el).find(obj.options.rowSelector).find(obj.options.handle).on("click",{obj:obj},obj._clickRowHandle)},_clickRowHandle:function(k){obj=k.data.obj,c(this).closest("li").hasClass(obj.options.openClassName)&&(obj._deactivate(),k.stopPropagation())},_activate:function(k){var l=this;k==this.activeRow||(this.openDelayId&&clearTimeout(this.openDelayId),0<parseInt(l.options.activationDelay,0)&&l.isOnHover?l.activeRow?l._activateWithoutDelay(k):this.openDelayId=setTimeout(function(){l._activateWithoutDelay(k)},l.options.activationDelay):l._activateWithoutDelay(k))},_activateWithoutDelay:function(k){this.activeRow&&this.options.deactivateCallback(this.activeRow),this.options.activateCallback(k),this.activeRow=k},_deactivate:function(){this.openDelayId&&clearTimeout(this.openDelayId),this.activeRow&&(this.options.deactivateCallback(this.activeRow),this.activeRow=null)},_possiblyActivate:function(k){var l=this._activationDelay(),m=this;l?this.timeoutId=setTimeout(function(){m._possiblyActivate(k)},l):this._activate(k)},_possiblyDeactivate:function(k){var l=this._activationDelay(),m=this;l?this.timeoutId=setTimeout(function(){m._possiblyDeactivate(k)},l):(this.options.deactivateCallback(k),this.activeRow=null)},_activationDelay:function(){function k(y,z){return(z.y-y.y)/(z.x-y.x)}if(!this.activeRow||!c(this.activeRow).is(this.options.submenuSelector))return 0;var l=c(this.el).offset(),m={x:l.left,y:l.top-this.options.tolerance},n={x:l.left+c(this.el).outerWidth(),y:m.y},o={x:l.left,y:l.top+c(this.el).outerHeight()+this.options.tolerance},p={x:l.left+c(this.el).outerWidth(),y:o.y},q=this.mouseLocs[this.mouseLocs.length-1],r=this.mouseLocs[0];if(!q)return 0;if(r||(r=q),r.x<l.left||r.x>p.x||r.y<l.top||r.y>p.y)return 0;if(this.lastDelayLoc&&q.x==this.lastDelayLoc.x&&q.y==this.lastDelayLoc.y)return 0;var s=n,t=p;"left"==this.options.submenuDirection?(s=o,t=m):"below"==this.options.submenuDirection?(s=p,t=o):"above"==this.options.submenuDirection&&(s=m,t=n);var u=k(q,s),v=k(q,t),w=k(r,s),x=k(r,t);return u<w&&v>x?(this.lastDelayLoc=q,this.options.defaultDelay):(this.lastDelayLoc=null,0)},_outsideMenuClick:function(k){var l=k.data.obj;c(l.el).not(k.target)&&0===c(l.el).has(k.target).length&&(l.options.deactivateCallback(l.activeRow),l.activeRow=null)},_hoverTriggerOn:function(){c(this.el).on("mouseleave",{obj:this},this._mouseLeaveMenu).find(this.options.rowSelector).on("mouseenter",{obj:this},this._mouseEnterRow).on("mouseleave",{obj:this},this._mouseLeaveRow),c(d).on("blur",{obj:this},this._mouseLeaveMenu),c(f).on("mousemove",{obj:this},this._mouseMoveDocument)},_hoverTriggerOff:function(){c(this.el).off("mouseleave",this._mouseLeaveMenu).find(this.options.rowSelector).off("mouseenter",this._mouseEnterRow).off("mouseleave",this._mouseLeaveRow),c(d).off("blur",this._mouseLeaveMenu),c(f).off("mousemove",{obj:this},this._mouseMoveDocument)},_clickTriggerOn:function(){c(this.el).find(this.options.rowSelector).on("click",{obj:this},this._clickRow),c(f).on("click",{obj:this},this._outsideMenuClick)},_clickTriggerOff:function(){c(this.el).find(this.options.rowSelector).off("click",this._clickRow),c(f).off("click",this._outsideMenuClick)},switchToHover:function(){this._clickTriggerOff(),this._hoverTriggerOn(),this.isOnHover=!0,this.isOnClick=!1},switchToClick:function(){this._hoverTriggerOff(),this._clickTriggerOn(),this.isOnHover=!1,this.isOnClick=!0}},c.fn[i]=function(k){var l=arguments;if(k===g||"object"==typeof k)return this.each(function(){c.data(this,"plugin_"+i)||c.data(this,"plugin_"+i,new h(this,k))});if("string"==typeof k&&"_"!==k[0]&&"init"!==k){var m;return this.each(function(){var n=c.data(this,"plugin_"+i);n instanceof h&&"function"==typeof n[k]&&(m=n[k].apply(n,Array.prototype.slice.call(l,1))),"destroy"===k&&c.data(this,"plugin_"+i,null)}),m===g?this:m}}})(jQuery,window,document);
